# ุจููุฉ ุฌุฏูู ุงูุงุดุชุฑุงูุงุช ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช

ูููุง ููู ุชูุซูู ูุจููุฉ ุฌุฏูู ุงูุงุดุชุฑุงูุงุช ููุง ุชู ุชุตุญูุญู ุจูุงุกู ุนูู ุงูุฃุฎุทุงุก ุงูุชู ูุงุฌูุชูุง:

## ๐๏ธ ุจููุฉ ุฌุฏูู ุงูุงุดุชุฑุงูุงุช ุงูุญุงููุฉ:

```sql
CREATE TABLE IF NOT EXISTS public.subscriptions (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  user_id UUID REFERENCES public.users(id),
  package_id TEXT,
  package_name TEXT NOT NULL,
  price INTEGER NOT NULL,
  days_count INTEGER NOT NULL,
  start_date TIMESTAMPTZ DEFAULT NOW(),
  expiry_date TIMESTAMPTZ NOT NULL,
  status TEXT DEFAULT 'pending',
  payment_method TEXT,
  created_at TIMESTAMPTZ DEFAULT NOW(),
  updated_at TIMESTAMPTZ DEFAULT NOW()
);
```

## ๐ ููุงุญุธุฉ ุญูู ุงูุญููู ุงูููููุฏุฉ:

ุงูุญููู ุงูุชุงููุฉ ุบูุฑ ููุฌูุฏุฉ ูู ุงูุฌุฏูู ุงูุญุงูู ููุฐูู ุชู ุญุฐููุง ูู ุงูุณูุฑูุจุช:
1. `payment_id` - ูุนุฑู ุณุฌู ุงูุฏูุน ุงููุฑุชุจุท
2. `receipt_url` - ุฑุงุจุท ุฅูุตุงู ุงูุฏูุน

## ๐ ุงูุนูุงูุฉ ูุน ุฌุฏูู ุงููุฏููุนุงุช:

ูุธุฑูุง ูุนุฏู ูุฌูุฏ ุญูู `payment_id` ูู ุฌุฏูู ุงูุงุดุชุฑุงูุงุชุ ูุชู ุฑุจุท ุณุฌูุงุช ุงูุงุดุชุฑุงู ูุน ุณุฌูุงุช ุงูุฏูุน ูู ุฎูุงู ุญูู `user_id` ุจุฏูุงู ูู ุฐูู. ูุฐุง ูุนูู ุฃู ูู ูุณุชุฎุฏู ูููู ุฃู ูููู ูุฏูู ุงุดุชุฑุงู ูุงุญุฏ ููุท ูุดุท ูู ููุณ ุงูููุช.

## ๐ง ุชูุตูุงุช ูุณุชูุจููุฉ:

ููุชุทููุฑ ุงููุณุชูุจููุ ูููุตุญ ุจุฅุถุงูุฉ ุญููู ุฅุถุงููุฉ ูุชุญุณูู ุชุชุจุน ุงูุงุดุชุฑุงูุงุช:

```sql
ALTER TABLE public.subscriptions
ADD COLUMN payment_id UUID,
ADD COLUMN receipt_url TEXT,
ADD COLUMN renewal_count INTEGER DEFAULT 0,
ADD COLUMN renewal_date TIMESTAMPTZ;
```

ูุฐู ุงูุชุนุฏููุงุช ุณุชุณูุญ ุจุชุญุณูู ุชุชุจุน:
- ุงูุฏูุนุงุช ุงููุฑุชุจุทุฉ ุจูู ุงุดุชุฑุงู
- ุฅูุตุงูุงุช ุงูุฏูุน
- ุนุฏุฏ ูุฑุงุช ุชุฌุฏูุฏ ุงูุงุดุชุฑุงู
- ุชุงุฑูุฎ ุขุฎุฑ ุชุฌุฏูุฏ

## ๐ ุทุฑููุฉ ุงูุชุนุงูู ูุน ุงูุฌุฏูู ุงูุญุงูู:

1. ุงุณุชุฎุฏู ุญูู `user_id` ูุฑุจุท ุงููุณุชุฎุฏู ุจุงูุงุดุชุฑุงู
2. ุงุณุชุฎุฏู ุญูู `status` ููุชูููุฒ ุจูู ุญุงูุงุช ุงูุงุดุชุฑุงู ุงููุฎุชููุฉ:
   - `pending` - ููุฏ ุงูุงูุชุธุงุฑ (ุจุงูุชุธุงุฑ ุงูููุงููุฉ)
   - `active` - ูุดุท (ุชูุช ุงูููุงููุฉ ูุฌุงุฑู ุงูุงุณุชุฎุฏุงู)
   - `expired` - ููุชูู (ุงูุชูุช ุตูุงุญูุฉ ุงูุงุดุชุฑุงู)
   - `cancelled` - ููุบู (ุชู ุฅูุบุงุก ุงูุงุดุชุฑุงู)
3. ุงุณุชุฎุฏู ุญููู `start_date` ู `expiry_date` ูุชุชุจุน ูุชุฑุฉ ุตูุงุญูุฉ ุงูุงุดุชุฑุงู
