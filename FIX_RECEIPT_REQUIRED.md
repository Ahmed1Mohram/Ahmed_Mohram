# إصلاح مشكلة طلب الدفع بدون صورة إيصال

## المشكلة:
عند محاولة إرسال طلب دفع بدون إرفاق صورة إيصال، يظهر خطأ:
```
{error: 'البيانات المطلوبة ناقصة'}
```

## التغييرات التي تم تنفيذها:

### 1. تعديل API طلب الدفع (`/api/payment-request/route.ts`):

- أضفت فحصًا خاصًا للتأكد من وجود صورة إيصال فقط لطريقة دفع "فودافون كاش":
  ```typescript
  // التحقق من وجود الإيصال لطريقة دفع فودافون كاش فقط
  if (paymentMethod === 'vodafone' && !receipt) {
    return NextResponse.json(
      { error: 'يجب إرفاق صورة الإيصال لطريقة دفع فودافون كاش' },
      { status: 400 }
    )
  }
  ```

- تحسين رسائل الخطأ لتكون أكثر تفصيلاً وتوضيحًا

### 2. تحسين واجهة المستخدم (`/app/subscription/page.tsx`):

- إضافة إشارة واضحة إلى أن إرفاق الإيصال مطلوب فقط لفودافون كاش:
  ```tsx
  <p className="text-sm font-medium text-white/70 mb-2">
    صورة إيصال الدفع 
    {paymentMethod === 'vodafone' ? 
      <span className="text-red-400"> (مطلوب)</span> : 
      <span className="text-gray-400"> (اختياري)</span>
    }
  </p>
  ```

- تحسين فحص الإدخال قبل إرسال النموذج:
  ```tsx
  // التحقق من وجود صورة الإيصال لطريقة دفع فودافون كاش فقط
  if (!receiptImage && paymentMethod === 'vodafone') {
    toast.error('يجب إرفاق صورة إيصال الدفع لطريقة فودافون كاش')
    return
  }
  ```

- تحسين عرض رسائل الخطأ القادمة من الخادم

## التوجيهات للمستخدم:

1. **لطريقة دفع فودافون كاش**:
   - إرفاق صورة إيصال الدفع إلزامي
   - يجب أن تكون الصورة بحجم أقل من 5 ميجابايت

2. **للطرق الأخرى** (مثل InstaPay):
   - إرفاق صورة الإيصال اختياري
   - يمكن المتابعة بدون إرفاق صورة

## مزايا الإصلاح:

- تحسين تجربة المستخدم مع رسائل واضحة
- دعم لطرق دفع متعددة بمتطلبات مختلفة
- معالجة أفضل للأخطاء مع رسائل أكثر تفصيلاً
- تطبيق الفحص في الواجهة والخادم للتأكد من سلامة البيانات
